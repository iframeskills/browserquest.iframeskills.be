define(function(){var a=Class.extend({init:function(){this.startValue=0,this.endValue=0,this.duration=0,this.inProgress=!1},start:function(a,b,c,d,e,f){this.startTime=a,this.updateFunction=b,this.stopFunction=c,this.startValue=d,this.endValue=e,this.duration=f,this.inProgress=!0,this.count=0},step:function(a){if(this.inProgress)if(this.count>0)this.count-=1,log.debug(a+": jumped frame");else{var b=a-this.startTime;b>this.duration&&(b=this.duration);var c=this.endValue-this.startValue,d=this.startValue+c/this.duration*b;d=Math.round(d),b===this.duration||d===this.endValue?(this.stop(),this.stopFunction&&this.stopFunction()):this.updateFunction&&this.updateFunction(d)}},restart:function(a,b,c){this.start(a,this.updateFunction,this.stopFunction,b,c,this.duration),this.step(a)},stop:function(){this.inProgress=!1}});return a})